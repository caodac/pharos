# Routes
# This file defines all application routes (Higher priority routes first)
# ~~~~

# Home page
GET     /       crosstalk.ncats.controllers.Granite.index()
POST    /loadmeta       crosstalk.ncats.controllers.Granite.loadMeta()
POST    /loadabs        crosstalk.ncats.controllers.Granite.loadAbs()
POST    /loadpub        crosstalk.ncats.controllers.Granite.loadPub()
POST    /:id    crosstalk.ncats.controllers.Granite.deleteGrant(id:Long)
DELETE    /:id  crosstalk.ncats.controllers.Granite.deleteGrant(id:Long)
POST    /       crosstalk.ncats.controllers.Granite.newGrant()

# Map static resources from the /public folder to the /assets URL path
GET     /assets/*file   controllers.Assets.at(path="/public", file)
GET     /webjars/*file          controllers.WebJarAssets.at(file)

GET     /api/search         crosstalk.core.controllers.SearchFactory.search(q, top: Int ?= 10, skip: Int ?= 0, expand: String ?= null)
#
# special variables are denoted by @'s and should be specified
# before other resources
#

GET     /admin/principal/:id    crosstalk.core.controllers.AdminFactory.getUser(id:Long)
DELETE  /admin/principal/:id    crosstalk.core.controllers.AdminFactory.deleteUser(id:Long)
GET     /admin/role/:id         crosstalk.core.controllers.AdminFactory.getRole(id:Long)
DELETE  /admin/role/:id         crosstalk.core.controllers.AdminFactory.deleteRole(id:Long)
GET     /admin/resource/:id         crosstalk.core.controllers.AdminFactory.getResource(id:Long)
DELETE  /admin/resource/:id         crosstalk.core.controllers.AdminFactory.deleteResource(id:Long)
GET     /admin/:resource    crosstalk.core.controllers.AdminFactory.get(resource: String)
POST    /admin/principal        crosstalk.core.controllers.AdminFactory.createUser()
POST    /admin/test1    crosstalk.core.controllers.AdminFactory.createTest1()


##################################
# Project forms
##################################
GET     /projects/@migration    crosstalk.ncats.controllers.ProjectMigration.index()
POST    /projects/@migration    crosstalk.ncats.controllers.ProjectMigration.migrate()
GET     /projects/@form crosstalk.ncats.controllers.ProjectFactory.index()
POST    /projects/@form crosstalk.ncats.controllers.ProjectFactory.newProject()


##################################
# API for entity routing
##################################
GET     /api/$context<[a-z0-9_]+>/@count       crosstalk.core.controllers.RouteFactory.count(context: String)
GET     /api/$context<[a-z0-9_]+>/:id  crosstalk.core.controllers.RouteFactory.get(context: String, id: Long, expand:String ?= null)
GET     /api/$context<[a-z0-9_]+>/:id/@edits      crosstalk.core.controllers.RouteFactory.edits(context: String, id:Long)
GET     /api/$context<[a-z0-9_]+>(:id)     crosstalk.core.controllers.RouteFactory.get(context: String, id: Long, expand: String ?= null)
GET     /api/$context<[a-z0-9_]+>(:id)/  crosstalk.core.controllers.RouteFactory.get(context: String, id: Long, expand: String ?= null)
GET     /api/$context<[a-z0-9_]+>(:id)/@edits      crosstalk.core.controllers.RouteFactory.edits(context: String, id: Long)
GET     /api/$context<[a-z0-9_]+>/:id/  crosstalk.core.controllers.RouteFactory.get(context: String, id: Long, expand: String ?= null)
GET     /api/$context<[a-z0-9_]+>/:id/*field  crosstalk.core.controllers.RouteFactory.field(context: String, id: Long, field: String)
GET     /api/$context<[a-z0-9_]+>(:id)/*field  crosstalk.core.controllers.RouteFactory.field(context: String, id: Long, field: String)
GET     /api/$context<[a-z0-9_]+>  crosstalk.core.controllers.RouteFactory.page(context: String, top: Int ?=10, skip: Int ?= 0, expand: String ?= null, filter: String ?= null)
GET     /api/$context<[a-z0-9_]+>/  crosstalk.core.controllers.RouteFactory.page(context: String, top: Int ?=10, skip: Int ?= 0, expand: String ?= null, filter: String ?= null)
POST    /api/$context<[a-z0-9_]+>  crosstalk.core.controllers.RouteFactory.create(context: String)
PUT     /api/$context<[a-z0-9_]+>/:id/*field       crosstalk.core.controllers.RouteFactory.update(context: String, id:Long, field: String)
PUT     /api/$context<[a-z0-9_]+>(:id)/*field       crosstalk.core.controllers.RouteFactory.update(context: String, id:Long, field: String)

#GET     /$ns<[a-z0-9_]+>/$resource<[a-z0-9_]+>       crosstalk.core.controllers.RouteFactory.get(ns: String, resource: String)
