# Routes
# This file defines all application routes (Higher priority routes first)
# ~~~~

# Home page
GET     /granite       ix.ncats.controllers.Granite.index()
POST    /granite/loadmeta       ix.ncats.controllers.Granite.loadMeta()
POST    /granite/loadabs        ix.ncats.controllers.Granite.loadAbs()
POST    /granite/loadpub        ix.ncats.controllers.Granite.loadPub()
DELETE    /granite/:id  ix.ncats.controllers.Granite.deleteGrant(id:Long)
POST    /granite       ix.ncats.controllers.Granite.newGrant()
POST    /granite/filter       ix.ncats.controllers.Granite.filter()

GET     /clinical/eligibility/test1     ix.ncats.controllers.clinical.EligibilityFactory.test1()

GET     /eutils/test    ix.ncats.controllers.test.EutilsTest.index()
POST    /eutils/test    ix.ncats.controllers.test.EutilsTest.fetch()

GET     /test/publication ix.ncats.controllers.TestFactory.publication()

##
## Docs
##
GET     /api-docs       controllers.ApiHelpController.getResources()
GET     /api-docs/api       controllers.ApiHelpController.getResource(path="/api")

##
## Map static resources from the /public folder to the /assets URL path
##
GET     /assets/*file   controllers.Assets.at(path="/public", file)
GET     /webjars/*file          controllers.WebJarAssets.at(file)

GET     /api/search         ix.core.controllers.SearchFactory.search(q: String ?= null, top: Int ?= 10, skip: Int ?= 0, fdim: Int ?= 10)
GET     /api/suggest/@fields       ix.core.controllers.SearchFactory.suggestFields
GET     /api/suggest/:field       ix.core.controllers.SearchFactory.suggestField(field: String, q: String, max: Int ?= 10)
GET     /api/suggest       ix.core.controllers.SearchFactory.suggest(q: String, max: Int ?= 10)

GET     /ctloader       ix.ncats.controllers.clinical.ClinicalTrialFactory.index()
POST    /ctloader       ix.ncats.controllers.clinical.ClinicalTrialFactory.loadUri()

#
# special variables are denoted by @'s and should be specified
# before other resources
#

##
## ADMIN (not done)
##
GET     /admin/principal/:id    ix.core.controllers.AdminFactory.getUser(id:Long)
DELETE  /admin/principal/:id    ix.core.controllers.AdminFactory.deleteUser(id:Long)
GET     /admin/role/:id         ix.core.controllers.AdminFactory.getRole(id:Long)
DELETE  /admin/role/:id         ix.core.controllers.AdminFactory.deleteRole(id:Long)
GET     /admin/resource/:id         ix.core.controllers.AdminFactory.getResource(id:Long)
DELETE  /admin/resource/:id         ix.core.controllers.AdminFactory.deleteResource(id:Long)
GET     /admin/:resource    ix.core.controllers.AdminFactory.get(resource: String)
POST    /admin/principal        ix.core.controllers.AdminFactory.createUser()
POST    /admin/test1    ix.core.controllers.AdminFactory.createTest1()


GET     /tcrd   ix.idg.controllers.TcrdLoader.index()
POST    /tcrd   ix.idg.controllers.TcrdLoader.load()

##################################
# Project forms
##################################
GET     /projects/@migration    ix.ncats.controllers.Migration.index()
POST    /projects/@migration    ix.ncats.controllers.Migration.migrate()
GET     /projects/@form ix.ncats.controllers.ProjectFactory.index()
POST    /projects/@form ix.ncats.controllers.ProjectFactory.newProject()

GET     /employees/@ldap ix.ncats.controllers.EmployeeFactory.ldap()
POST     /employees/@ldap ix.ncats.controllers.EmployeeFactory.list()


##################################
# API for entity routing
##################################
#GET     /api    ix.core.controllers.RouteFactory.listResources()
#GET     /api/    ix.core.controllers.RouteFactory.listResources()
GET     /api/$context<[a-z0-9_]+>/@count       ix.core.controllers.RouteFactory.count(context: String)
GET     /api/$context<[a-z0-9_]+>/search        ix.core.controllers.RouteFactory.search(context: String, q: String ?= null, top: Int ?= 10, skip: Int ?= 0, fdim: Int ?= 10)
GET     /api/$context<[a-z0-9_]+>/:id  ix.core.controllers.RouteFactory.get(context: String, id: Long, expand:String ?= null)
GET     /api/$context<[a-z0-9_]+>/:id/@edits      ix.core.controllers.RouteFactory.edits(context: String, id:Long)
GET     /api/$context<[a-z0-9_]+>(:id)     ix.core.controllers.RouteFactory.get(context: String, id: Long, expand: String ?= null)
GET     /api/$context<[a-z0-9_]+>(:id)/  ix.core.controllers.RouteFactory.get(context: String, id: Long, expand: String ?= null)
GET     /api/$context<[a-z0-9_]+>(:id)/@edits      ix.core.controllers.RouteFactory.edits(context: String, id: Long)
GET     /api/$context<[a-z0-9_]+>/:id/  ix.core.controllers.RouteFactory.get(context: String, id: Long, expand: String ?= null)
GET     /api/$context<[a-z0-9_]+>/:id/*field  ix.core.controllers.RouteFactory.field(context: String, id: Long, field: String)
GET     /api/$context<[a-z0-9_]+>(:id)/*field  ix.core.controllers.RouteFactory.field(context: String, id: Long, field: String)
GET     /api/$context<[a-z0-9_]+>  ix.core.controllers.RouteFactory.page(context: String, top: Int ?=10, skip: Int ?= 0, expand: String ?= null, filter: String ?= null)
GET     /api/$context<[a-z0-9_]+>/  ix.core.controllers.RouteFactory.page(context: String, top: Int ?=10, skip: Int ?= 0, expand: String ?= null, filter: String ?= null)
POST    /api/$context<[a-z0-9_]+>  ix.core.controllers.RouteFactory.create(context: String)
PUT     /api/$context<[a-z0-9_]+>/:id/*field       ix.core.controllers.RouteFactory.update(context: String, id:Long, field: String)
PUT     /api/$context<[a-z0-9_]+>(:id)/*field       ix.core.controllers.RouteFactory.update(context: String, id:Long, field: String)

#GET     /$ns<[a-z0-9_]+>/$resource<[a-z0-9_]+>       ix.core.controllers.RouteFactory.get(ns: String, resource: String)
