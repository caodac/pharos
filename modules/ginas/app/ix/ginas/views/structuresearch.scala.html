@ginas("Structure Search: ", null) {
    @menu()
} {
    <h1></h1>
} {
    <div class = "panel-default"  ng-controller ="StrucSearchController as StrucSearchCtrl">
        <div class= "panel-body">
            <form class="form-inline"
            method="GET" action="@ix.ginas.controllers.routes.GinasApp.substances()" novalidate>
            <div class="row">
                <div class="col-md-12">
                    <sketcher width="100%" ng-model="structure"  structure-query="StrucSearchCtrl.controllerFunction"></sketcher>
                </div>
            </div>
        </div>
        <div class="panel-footer">
            <div class="row">
                <div class="col-md-12">

                        <div class="form-group col-md-2">
                            <label class="sr-only" for="search-selection">Search Type</label>
                            <select class="form-control" id="search-selection" name="type" ng-model ="type" >
                                <option ng-repeat="v in select" value="{{v}}">{{v}}</option>
                            </select>
                            <label class="sr-only" for="tanimoto-cutoff">Tanimoto threshold</label>

                            <input class="form-control col-md-2"
                            ng-if="type=='Similarity'" type="number" step=".1"
                            min="0" max="1"
                            name="cutoff"
                            id="tanimoto-cutoff"
                            data-toggle="tooltip"
                            title="Tanimoto threshold"
                            ng-model="cutoff"
                            >
                            <input type="text" class="form-control"
                            data-toggle="tooltip"
                            title="Query structure"
                            name="q"
                            ng-hide="true"
                            ng-model="ginasCtrl.substance.q"
                            id="structure">
                        </div>
                        <button type="submit" onclick="submitForm()"
                        class="btn btn-primary" id="search-btn">Search</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" tabindex="-1" role="dialog" id="spinModal"
    aria-labelledby="mySmallModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <center><img src='@routes.Assets.at("ncats/images/spinners/294.GIF")'></center>
            </div>
        </div>
    </div>

            <script>
        var strucUrl = '@ix.ncats.controllers.routes.App.molinstrument';
        var smilesUrl='@ix.ncats.controllers.routes.App.smiles';
    </script>
        @*
    $(document).ready(function() {
    sketcher = new JSDraw("sketcher");
    });

    function submitForm () {
    // console.log(el);
    $('#strucModal').modal('hide');
    $('#loading').modal("show");
    $("#search-btn").submit();
    }

    function searchSelect () {
    console.log("search select");
    var selection = document.getElementById("search-selection");
    var text = document.getElementById("tanimoto-cutoff");
    var search = document.getElementById("search-btn");
    text.disabled = selection.value != 'Similarity';
    if (!text.disabled) {
    checkTanimoto (text);
    } else {
    search.disabled = false;
    }

    console.log(selection.value);
    }
    function checkTanimoto (el) {
    //console.log("tanimoto='"+el.value+"'");
    var search = document.getElementById("search-btn");
    try {
    var x = el.value.trim();
    search.disabled = x.length == 0 || isNaN(x) || x <= 0 || x > 1.;
    } catch (e) {
    search.disabled = true;
    }
    }*@

 @*   function molchange(sketch){
    console.log("molchange");
    console.log(sketch.getSmiles());
    $('#structure').typeahead('val', '"'+sketch.getSmiles()+'"');
    // $('#structure').val(sketch.getSmiles());
    setQuery(sketch.getSmiles());
    };
    </script>*@
}
