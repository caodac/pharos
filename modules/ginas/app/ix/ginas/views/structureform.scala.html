<div class = "row info" ng-controller="StructureController as StructureCtrl">
    <button class="btn btn-primary label-offset det">
                       Structure</button>
    <div>
        <div class="col-md-12" id="structureSearcher">
            <form name = "structureForm" id = "add-structure" role="form" novalidate>
                <div class="row">
                    <div class = "col-md-12" id="jsdraw">
                        <sketcher ng-model="structure"></sketcher>

                    </div>
                </div>

                <div class="row">
                    <div class="col-md-2 pull-right">
                        <a class= "pull-right padded" data-toggle="modal" data-target="#molexport" aria-label="Export"><i class="fa fa-external-link fa-2x success"></i></a> &nbsp;
                        <a class= "pull-right padded" data-toggle="modal" data-target="#structureimport" aria-label="Import" ><i class="fa fa-clipboard fa-2x success"></i></a>
                    </div>
                </div>
                <div class ="row header-row">
                    <div class = "col-md-3"><strong>Molecular Formula</strong></div>
                    <div class = "col-md-3"><strong>Molecular Weight</strong></div>
                    <div class = "col-md-2"><strong>Defined Stereocenters</strong></div>
                    <div class = "col-md-1"><strong>EZ Centers</strong></div>
                    <div class = "col-md-1"><strong>Charge</strong></div>
                    <div class = "col-md-2"><strong>Reference ID</strong></div>
                </div>
                <div class ="row" >
                    <div class = "col-md-3">
                                    {{ginasCtrl.substance.chemical.structure.formula}}
                    </div>
                    <div class = "col-md-3">
                                    {{ginasCtrl.substance.chemical.structure.mwt}}
                    </div>
                    <div class = "col-md-2">
                    {{ginasCtrl.substance.chemical.structure.definedStereo ||0 }}/{{ginasCtrl.substance.chemical.structure.stereoCenters || 0}}
                    </div>
                    <div class = "col-md-1">
                    {{ginasCtrl.substance.chemical.structure.ezCenters}}
                    </div>
                    <div class = "col-md-1">
                    {{ginasCtrl.substance.chemical.charge}}
                    </div>
                    <div class="col-md-2 err-check" show-errors>
                        <a ng-show="!ginasCtrl.substance.references" data-toggle="modal" data-target="#addnamelist" role="button" aria-label="Add a reference"><i class="fa fa-plus fa-2x success"></i></a>
                        <p class="danger" ng-if="!ginasCtrl.substance.references && structureForm.reference.$error">*required</p>
                        <select class="form-control" title="Reference" id="reference" name = "reference" ng-hide="!ginasCtrl.substance.references" ng-init= "structure.references = ginasCtrl.substance.references[0]" ng-model = "structure.references" ng-options="ref.citation for ref in  ginasCtrl.substance.references" required></select>
                        <ng-messages for="structureForm.reference.$error" ng-if="structureForm.reference.$pristine">
                            <ng-message when="required" class="help-block">*required</ng-message>
                        </ng-messages>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <div class="modal fade export" id="molexport" tabindex="-1" role="dialog" aria-labelledby="myModalLabelExport" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabelExport">Export Mol File</h4>
                </div>
                <div class="modal-body">
                    <div class = "row">
                        <textarea class="col-md-12" id = "inputExport">
                         {{ginasCtrl.substance.chemical.structure.molfile}}
                        </textarea>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary" onclick="" data-dismiss="modal">Save</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
        <!-- Modal -->
    <div class="modal fade" id="structureimport" tabindex="-1" role="dialog" aria-labelledby="myModalLabelimport" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabelimport">Structure Import</h4>
                </div>
                <div class="modal-body">
                    <form class="form" role="import" method="GET"
                    action="" id = "filereader">
                        <div class="form-group">
                            <div class = "row">
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label for="exampleInputFile">Load File</label>
                                        <input type="button" value="Choose File" onclick="window.FileContentsGrabber.append('mol-sequence')" id="exampleInputFile">
                                        <p class="help-block">or</p>
                                    </div>
                                </div>
                            </div>
                            <div class = "row">
                                <div class="col-md-12">
                                    <label for="description-det">Enter molfile, smiles or systematic name:</label>
                                    <textarea spellcheck="false" class="form-control" rows="10" ng-model="structure.molfile" ng-trim="false" ng-change=" " id="mol-sequence"></textarea>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" ng-click="structure.molfile=null;" data-dismiss="modal">Close</button>
                            <button type="button" class="btn btn-primary" ng-click="StructureCtrl.resolveMol(structure)" data-dismiss="modal">Import</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
