
@import ix.npc.controllers.EntityFactory
@import ix.npc.controllers.NPCApp
@import ix.ncats.controllers.App.FacetDecorator
@import ix.ncats.controllers.App
@import ix.npc.models.Entity
@import ix.core.models.Structure
@import ix.core.models.Keyword
@import ix.npc.models.Properties

@(current: Int, rows: Int, total: Int, pages: Array[Int],
facets: Array[FacetDecorator], entities: List[Entity], ctx: String)

@cell(e: Entity) = {
 <div class="col-sm-6 col-md-4">
   <div class="thumbnail">
     @defining(NPCApp.getStructure(e)) { struc =>
       @if(struc != null) {
        <a href='@ix.npc.controllers.routes.NPCApp.entity(e.getId.toString)'><img src='@ix.ncats.controllers.routes.App.structure(struc.getId, "svg", 200, ctx)' alt="Structure for entity @e.getName"> </a>
       }

	<div class="caption">
	@if(struc != null) {
	<a role="button" class="btn" href='@ix.npc.controllers.routes.NPCApp.sketcher(struc.id.toString)'><i class="fa fa-edit" aria-hidden="true"></i></a>
	  }
	  @e.getName
	</div>
     }
   </div>
 </div>
}

@ix.ncats.views.html.content("Entities", "ix.npc.models.Entity",
ix.npc.controllers.routes.NPCApp.entities().url,
current, rows, total, pages, facets){ @entitiesmenu("Entities") }{
<ol class="breadcrumb" style="margin-top:60px;">
  <li><a href="@ix.npc.controllers.routes.NPCApp.index"><span class="fa fa-home"></span> Home</a></li>
</ol>
}{
  @defining(NPCApp.toMatrix(3, entities)) { emat =>
     @for(i <- 0 until emat.length) {
	  <div class="row">
	    @for(e <- emat(i)) {
	       @if(e != null) {
	           @cell(e)
	       }
	    }
	  </div>
     }
  }
}{
}

<script>
$(function () {
  $('[data-toggle="popover"]').popover();
  $('[data-toggle="tooltip"]').tooltip();
});
</script>
