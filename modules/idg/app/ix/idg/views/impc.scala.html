@import ix.idg.models.Target
@import ix.idg.controllers.IDGApp

@(title: String, termCounts: Map[String,Integer], targetCounts: Map[Target,Integer], targets: List[Target])

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge">

        <title>@title</title>


        <link rel="stylesheet"
        href='@routes.WebJarAssets.at(WebJarAssets.locate("bootstrap.min.css"))'>
        <link rel="stylesheet" type="text/css"
        href='@routes.WebJarAssets.at(WebJarAssets.locate("font-awesome.min.css"))'>
        <link rel="stylesheet" type="text/css"
        href='@routes.Assets.at("ncats/css/idg-landing-hex.css")'>
        <link rel="icon" type="image/png" href='@routes.Assets.at("images/favicon.png")'>
        <style type="text/css">

        .lead {
        font-weight : bolder ;
        }

        h5 {
        color : #666666 ;
        display : inline ;
        line-height : 1.75 ;
        font-style : italic ;
        padding-left : 1 em ;
        }

        .axis text {
        font: 10px sans-serif;
        }

        .title {
            font: 12px sans-serif bold;
        }

        .axis line,
        .axis path {
        fill: none;
        stroke: #000;
        shape-rendering: crispEdges;
        }

        </style>
            <!--[if lte IE 9]>
<style type="text/css">
#ie6msg {border:3px solid #c33; margin:8px 0; background:#fcc; color:#000;}
#ie6msg h4{margin:8px; padding:0;}
#ie6msg p{margin:8px; padding:0;}
#ie6msg p a.getie7{font-weight:bold; color:#006;}
#ie6msg p a.ie6expl{font-weight:bold; color:#006;}
</style>
<div id="ie6msg">
<h4>Did you know that your browser is out of date, and potentially poses a security risk?</h4>
<p>To get the best possible experience using this website it is recommended that you upgrade your browser to a newer version.
<p>You could also try some other popular browsers like <a class="ie6expl" href="http://mozilla.com">FireFox</a> or
 <a class="ie6expl" href="https://www.google.com/chrome/S">Chrome</a>.</p>
</div>
<![endif]-->

        <script src='@routes.WebJarAssets.at(WebJarAssets.locate("jquery.min.js"))' type='text/javascript'></script>
        <script src='@routes.WebJarAssets.at(WebJarAssets.locate("highcharts.js"))' type='text/javascript'></script>
        <script type="text/javascript" src='@routes.Assets.at("javascripts/underscore.js")'></script>
        <script type="text/javascript" src='@routes.Assets.at("javascripts/underscore.string.js")'></script>
        <script src='@routes.WebJarAssets.at(WebJarAssets.locate("bootstrap.min.js"))'></script>
        <script src='@routes.WebJarAssets.at(WebJarAssets.locate("typeahead.bundle.min.js"))'></script>
        <script src='@routes.WebJarAssets.at(WebJarAssets.locate("handlebars.min.js"))'></script>
        <script src='@routes.WebJarAssets.at(WebJarAssets.locate("bloodhound.min.js"))'></script>
        <script>
        ( function ( i, s, o, g, r, a, m ) { i[ 'GoogleAnalyticsObject' ] = r ; i[ r ] = i[ r ] || function ( ) {
        ( i[ r ].q = i[ r ].q ||[ ] ).push ( arguments ) }, i[ r ].l = 1 * new Date ( ) ; a = s.createElement ( o ),
        m = s.getElementsByTagName ( o )[ 0 ] ; a.async = 1 ; a.src = g ; m.parentNode.insertBefore ( a, m )
        } ) ( window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga' ) ;

        ga ( 'create', 'UA-53774738-1', 'auto' ) ;
        ga ( 'send', 'pageview' ) ;
        </script>

        <script type='text/javascript'>

            var makeBarChart = function(selector, dataset, title, ytitle) {
                $(selector ).highcharts({
                    chart: {
                        type: 'column'
                    },
                    title: {
                        text: title
                    },
                    xAxis: {
                        categories: _.pluck(dataset, 'term')
                    },
                    yAxis: {
                        title: {text: ytitle}
                    },
                    series: [{
                        showInLegend: false,
                        name:'',
                        data: _.pluck(dataset, 'count')
                    }],
                    plotOptions:{
                        column: {
                            animation:false
                        },
                        series: {
                            animation: false
                        }
                    }
                });

            };

        $(document).ready(function () {

        var targetset = [
            @for(key <- targetCounts.keySet()) {
                { term : '@key.getSynonym(Commons.UNIPROT_GENE).term', count: @targetCounts.get(key) },
            }
        ];
        targetset = _.first(_.sortBy ( targetset, function(x) { return -1* x.count; } ), 10) ;

        var dataset =[
            @for(entry <- termCounts.entrySet()) {
                { term : '@entry.getKey()', count: @entry.getValue() },
            }
        ] ;
        dataset = _.first(_.sortBy ( dataset, function(x) { return -1* x.count; } ), 10);

        makeBarChart("#hist-term", dataset, 'IMPC Phenotype Frequencies', 'Frequency');
        makeBarChart("#hist-targets", targetset, 'IMPC Phenotypes by Target', 'Number of phenotypes');

        });
        </script>
    </head>
    <body>
        <div class="jumbotron">
            <div class="container">
                <center><h1>IMPC Associated Targets</h1></center>
            </div>
        </div>

        <div class="container vertical-center" id="main-box">
            <div class="row">
                <p>The <a href="http://www.impc.org/">International Mouse Phenotyping Consortium</a> is a worldwide
                    consortium that has the capacity to knock-out mice, test mutant mice lines, and provide access to
                    genotype-phenotype annotation, standard operating protocols, and the development of open source
                    data analysis tools.</p>
                <p>This page summarizes the phenotypes associated with the 20,000 targets considered by the IDG program.
                You can explore all targets associated with IMPC phenotypes
                <a href="/idg/targets?facet=Data+Source/IMPC">here</a></p>
            </div>

            <div class="row">
                <div class="col-md-6" id="hist-term">

                </div>
                <div class="col-md-6" id="hist-targets">

                </div>
            </div>
        </div>
    </body>



</html>
