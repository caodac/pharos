
@import ix.tox21.models.Sample
@import ix.tox21.models.QCSample

@(qc: QCSample)

@ix.ncats.views.html.main(qc.sample.getName(), qc.getClass().getName()){
  @ix.ncats.views.html.header{
   <a class="navbar-brand" href="@ix.tox21.controllers.routes.Tox21App.index"
      style="padding: 0px 5px; margin-left: 0px;">
     <img height="50" alt="Tox21 Logo"
	  src='@routes.Assets.at("ncats/images/Tox21_logo_128.png")'/>
   </a>
   }{
   <ul class="nav navbar-nav navbar-right">
     <form class="navbar-form navbar-right" role="search" method="GET"
           action="@ix.tox21.controllers.routes.Tox21App.search">
       <div class="form-group">
         <input type="text" id="search-header-field" name="q"
		class="typeahead form-control" placeholder="Search..."/>
       </div>
       <button type="submit" class="btn btn-default">
         <span class="fa fa-search" aria-hidden="true"></span>
       </button>
     </form>
   </ul> 
  }
}{
<ol class="breadcrumb">
  <li><a href="@ix.tox21.controllers.routes.Tox21App.index"><span class="fa fa-home"></span> Home</a></li>
    <li><a href="@ix.tox21.controllers.routes.Tox21App.samples()">Tox21 Samples</a></li>
    <li class="active">@qc.sample.getSynonym(Sample.S_TOX21).term</li>
</ol>
}{
<div class="container-fluid">
  <div class="col-md-12">
    <div class="page-header">
      <h1>
        <table>
        <tr>
         <td>
           <span class="label label-@qc.grade.label">@qc.grade</span>
         </td>
         <td style="padding:5px;"></td>
         <td>@qc.sample.getName()</td>
        </tr>
        </table>
      </h1>
    </div>
    <div class="row">
      <div class="col-md-4">
	<div class="panel panel-default">
	  <div class="panel-body">
	    <center>
	      @if(qc.grade == QCSample.Grade.ND) {
	      <div class="alert alert-@qc.grade.label">
		@HtmlFormat.raw(qc.grade.desc.replaceAll("\n","<p>"))
	      </div>
	      } else {
  	      <a href="https://tripod.nih.gov/tox21/QC/@qc.sample.getSynonym(Sample.S_TOX21).term">@HtmlFormat.raw(qc.grade.desc.replaceAll("\n","<p>"))</a>
	      }
	      <div id="loading"></div>
	    </center>
	  </div>
	</div>
      </div>
      <div class="col-md-4">
	<div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Synonyms</h3>
          </div>
          <div class="panel-body">
            <table class="table">
              <tr><td>@qc.sample.getSynonym(Sample.S_TOX21).term</td></tr>
              <tr><td>@qc.sample.getSynonym(Sample.S_NCGC).term</td></tr>
	      <tr><td>@qc.sample.getSynonym(Sample.S_CASRN).term</td></tr>
	      <tr><td><a href="https://pubchem.ncbi.nlm.nih.gov/summary/summary.cgi?sid=@qc.sample.getSynonym(Sample.S_SID).term"</td>@qc.sample.getSynonym(Sample.S_SID).term</a></tr>
	    </table>
	  </div>
	</div>
      </div>
<div class="col-md-4">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Properties</h3>
          </div>
          <div class="panel-body">
	    Coming soon...
          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">In vitro Summary</h3>
          </div>
          <div class="panel-body">
	    Coming soon...
          </div>
        </div>

       </div>
      </div>
    </div>
  </div>
</div>
}

@ix.ncats.views.html.typeahead(Array("Sample", "Tox21", "NCGC","CASRN","SID"))

<script>
$(document).ready(function () {
    $('#loading').html('<h3>loading... <i class="fa fa-spinner fa-spin"></i></h3>');
    
    // run ajax request
    $.ajax({
        type: "GET",
        dataType: "html",
        contentType: "image/svg+xml",
        url: "@ix.tox21.controllers.routes.Tox21App.render(qc.sample.id,300)",
        success: function (d) {
            // replace div's content with returned data
            $('#loading').html(d);
        },
        error: function (xhr, status) {
            $('#loading').html('<div class="alert alert-warning" role="alert">Unable to load structure</div>');
        }
    });
});
</script>
