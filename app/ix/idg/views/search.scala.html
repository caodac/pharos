@import ix.idg.models.Target
@import ix.idg.models.Disease
@import ix.idg.controllers.IDGApp
@import ix.ncats.controllers.App
@import ix.core.search.TextIndexer
@import ix.core.search.TextIndexer._
@import ix.ncats.controllers.App.FacetDecorator

@(query: String, total: Int, facets: Array[FacetDecorator],
targets: List[Target], totalTargets: Int,
diseases: List[Disease], totalDiseases: Int)

@tabrow(t: Target) = {
<tr>
  <td><a href="@ix.idg.controllers.routes.IDGApp.target(IDGApp.getId(t))">@t.name</a></td>
  <td>@t.idgTDL</td>
  <td>@t.idgFamily</td>
</tr>
}

@ix.ncats.views.html.main("Search: "+query, null){
@menu(null){
<ul class="nav navbar-nav navbar-left">
  <li role="presentation"><a href="@ix.idg.controllers.routes.IDGApp.diseases(null,10,1)">Diseases</a></li>
  <li role="presentation"><a href="@ix.idg.controllers.routes.IDGApp.targets(null,30,1)">Targets</a></li>
  <li role="presentation"><a href="@ix.idg.controllers.routes.IDGApp.ligands(null,8,1)">Ligands</a></li>
</ul>
}
}{
<ol class="breadcrumb">
  <li><a href="@ix.idg.controllers.routes.IDGApp.index()"><span class="fa fa-home"></span> Home</a></li>
</ol>
}{
<div class="container-fluid">
  <div class="row">
    @if(facets.length > 0) {
    <div class="col-md-3">
      @ix.ncats.views.html.filters(facets)
    </div> 
    <div class="col-md-9">
      } else {
      <div class="col-md-12">
      }
      <div 
	 @if(total > 0) {
	class="alert alert-success" 
	} else {
	class="alert alert-danger" 
	}
	role="alert">
	<span><h4>Query:<code>@query</code></h4></span>
      </div>
      <div class="btn-group" role="group">
	@if(total == 1) {
	<h3><span class="label label-default">@total result found.</span></h3>
	} else {
        <h3><span class="label label-default">@total results found.</span></h3>
	}
      </div>
      <div class="panel panel-default">
	<div class="panel-body">
	  <table class="table table-striped">
	    <tr>
	      <th>Name</th>
	      <th>Development Level</th>
	      <th>Target Family</th>
	    </tr>
	    @for(t <- targets) {
	      @tabrow(t)
		      }
		      </table>
	   @if(targets.length < totalTargets) {
	    <span><i class="fa fa-ellipsis-h"></i></span>
	    }
	</div>
	<div class="panel-footer">
	  <a href="@{ix.idg.controllers.routes.IDGApp.targets()+"?"+App.queryString(request().queryString())}">@totalTargets target(s)</a>
	</div>
      </div>
      <div class="panel panel-default">
	<div class="panel-body">
	  <table class="table table-striped">
	    <tr>
	      <th>Name</th>
	      <th>Description</th>
	    </tr>
	    @for(d <- diseases) {
	    <tr>
	      <td><a href="@ix.idg.controllers.routes.IDGApp.disease(IDGApp.getId(d))">@d.name</a></td>
	      <td>@d.description</td>
	    </tr>
            }
	  </table>
	   @if(diseases.length < totalDiseases) {
	    <span><i class="fa fa-ellipsis-h"></i></span>
	    }
	</div>
	<div class="panel-footer">
	  <a href="@{ix.idg.controllers.routes.IDGApp.diseases()+"?"+App.queryString(request().queryString())}">@totalDiseases disease(s)</a>
	</div>
    </div>
      </div>
    </div>
</div>
}
